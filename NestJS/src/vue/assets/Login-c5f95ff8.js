import{n as o}from"./index-a1f01123.js";const a={name:"Login",data(){return{form:{email:"",password:""},rules:{email:[{required:!0,message:"请输入邮箱",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},mounted(){},methods:{async login(){await this.$refs.ruleForm.validate();let t=await this.$request.post("/user/login",this.form);this.$setToken(t),this.$message.success("登录成功"),localStorage.setItem("email",this.form.email),await this.$router.push("/")},async onGetUserInfo(){let t=await this.$request("/sysUser/getInfo");this.$setUserPermission(t.permissions),this.$setUserRole(t.roles),this.$setUserInfo(t.user)},toRegister(){this.$router.push("/register")}}};var i=function(){var e=this,s=e._self._c;return s("div",{staticClass:"box df jcsb"},[s("el-card",{staticClass:"box-card asc",staticStyle:{margin:"0 auto"}},[s("h2",{staticClass:"title"},[e._v("登录")]),s("el-form",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules}},[s("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[s("el-input",{attrs:{placeholder:"邮箱"},model:{value:e.form.email,callback:function(r){e.$set(e.form,"email",r)},expression:"form.email"}})],1),s("el-form-item",{attrs:{label:"密码",prop:"password"}},[s("el-input",{attrs:{"show-password":"",type:"password",placeholder:"密码"},model:{value:e.form.password,callback:function(r){e.$set(e.form,"password",r)},expression:"form.password"}})],1),s("div",{staticClass:"df fdrr color-primary cp",on:{click:function(r){return e.toRegister()}}},[e._v(" 暂未账号？立马注册 ")]),s("el-form-item",{staticClass:"box-btn df jcsb fdrr"},[s("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.login()}}},[e._v("登录")])],1)],1)],1)],1)},l=[],n=o(a,i,l,!1,null,"e0670401",null,null);const c=n.exports;export{c as default};
