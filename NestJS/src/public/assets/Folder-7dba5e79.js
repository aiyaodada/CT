import{n as i}from"./index-b03ec83c.js";const r={name:"Class",components:{},data(){return{tableData:{},params:{pageNum:1,pageSize:10,name:"",visible:""},dialogVisible:!1,form:{},srcList:[],typeList:[],classList:[],rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"},{min:2,max:20,message:"请输入拼音或英文！",trigger:"blur"},{validator:(l,e,t)=>{/^[a-zA-Z0-9]+$/.test(e)?t():t(new Error("请输入英文或数字，且不允许出现其他标点符号"))},trigger:"blur"}]}}},async mounted(){await this.onSearch()},methods:{async onSearch(){let{pageNum:l,pageSize:e,name:t,visible:a}=this.params;this.tableData=await this.$request.get(`/folder?pageNum=${l}&pageSize=${e}&name=${t}&visible=${a}`)},onAdd(){this.form={name:"",visible:0},this.dialogVisible=!0},onEdit(l){this.form={...l},this.dialogVisible=!0},async onSubmit(){await this.$refs.form.validate(),this.form.id!=null?await this.$request.patch(`/folder/${this.form.id}`,{...this.form}):await this.$request.post("/folder",{...this.form}),this.dialogVisible=!1,await this.$message.success("操作成功"),await this.onSearch()},async onDelete(l){await this.$confirm(`是否确认删除${l.name}?`),await this.$request.delete(`/folder/${l.id}`),await this.$message.success("操作成功"),await this.onSearch()},handlePageChange(l){this.params.pageNum=l,this.onSearch()},handleSizeChange(l){this.params.pageSize=l,this.onSearch()},handleClose(l){this.$confirm("确认关闭？").then(e=>{l()}).catch(e=>{})}}};var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("el-form",{attrs:{inline:"",size:"small"}},[t("el-button",{staticStyle:{"margin-right":"3em"},attrs:{type:"success",size:"small",icon:"el-icon-plus"},on:{click:e.onAdd}},[e._v("添加文件夹 ")]),t("el-form-item",{attrs:{label:"名称"}},[t("el-input",{attrs:{placeholder:"名称",clearable:""},model:{value:e.params.name,callback:function(a){e.$set(e.params,"name",a)},expression:"params.name"}})],1),t("el-form-item",{attrs:{label:"可见类型"}},[t("el-select",{staticClass:"w-100",attrs:{placeholder:"可见类型",clearable:""},model:{value:e.params.visible,callback:function(a){e.$set(e.params,"visible",a)},expression:"params.visible"}},[t("el-option",{attrs:{label:"公共",value:"0"}}),t("el-option",{attrs:{label:"私密",value:"1"}})],1)],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onSearch}},[e._v("查询")])],1)],1),t("el-table",{staticStyle:{width:"100%","border-radius":"10px"},attrs:{data:e.tableData.records,border:"",size:"mini","header-cell-style":{background:"#409EFF",color:"#ffffff"}}},[t("el-table-column",{attrs:{prop:"name",label:"名称"}}),t("el-table-column",{attrs:{prop:"visible",label:"是否可见"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{type:a.row.visible==0?"":"warning"}},[e._v(e._s(a.row.visible==0?"公共":"私密"))])]}}])}),t("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}}),t("el-table-column",{attrs:{width:"180",fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{staticClass:"color-warning",attrs:{type:"text",size:"mini"},on:{click:function(s){return e.onEdit(a.row)}}},[e._v("编辑")]),t("el-button",{staticClass:"color-danger",attrs:{type:"text",size:"mini"},on:{click:function(s){return e.onDelete(a.row)}}},[e._v("删除")])]}}])})],1),t("div",{staticClass:"block"},[t("el-pagination",{attrs:{size:"small","current-page":Number(e.tableData.current),"page-sizes":[10,50,100],"page-size":Number(e.tableData.size),layout:"total, sizes, prev, pager, next, jumper",total:Number(e.tableData.total)},on:{"size-change":e.handleSizeChange,"current-change":e.handlePageChange}})],1),t("el-dialog",{attrs:{title:"产品管理",visible:e.dialogVisible,width:"40%","before-close":e.handleClose},on:{"update:visible":function(a){e.dialogVisible=a}}},[t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,size:"small","label-width":"80px"}},[t("el-form-item",{attrs:{label:"名称",prop:"name"}},[t("el-input",{attrs:{placeholder:"名称",clearable:""},model:{value:e.form.name,callback:function(a){e.$set(e.form,"name",a)},expression:"form.name"}})],1),t("el-form-item",{attrs:{label:"可见类型"}},[t("el-select",{staticClass:"w-100",attrs:{placeholder:"可见类型",clearable:""},model:{value:e.form.visible,callback:function(a){e.$set(e.form,"visible",a)},expression:"form.visible"}},[t("el-option",{attrs:{label:"公共",value:0}}),t("el-option",{attrs:{label:"私密",value:1}})],1)],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"mini"},on:{click:function(a){e.dialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.onSubmit()}}},[e._v("确 定")])],1)],1)],1)},o=[],c=i(r,n,o,!1,null,"a8d52d7c",null,null);const u=c.exports;export{u as default};
